var O,e,B,I,o,H,V,W,n="custom-theme",q="Arial",G=16,K=1,X=0,j=680,J="\n  #cr-body {\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 14px;\n  }\n\n  #cr-body a{\n    text-decoration: none;\n  }\n\n  #cr-meta{\n  }\n\n  #cr-outline{\n    width: 250px;\n    position: fixed;\n    top: 65px;\n    left: 30px;\n  }\n\n  #cr-content-wrapper a{\n    text-decoration: underline;\n  }\n\n  h1#cr-title,\n  #cr-content h1,\n  #cr-content h2,\n  #cr-content h3,\n  #cr-content h4,\n  #cr-content h5,\n  #cr-content h6 {\n    font-weight: 700;\n    line-height: 1.3em;\n    font-family: inherit;\n    margin-top: 1.6em;\n    margin-bottom: 0.8em;\n  }\n  #cr-content #cr-title{\n    margin-top: 40px;\n  }\n  #cr-content p{\n    word-break: break-word;\n    margin-top: 1.5em;\n    margin-bottom: 1.5em;\n  }\n  #cr-content figure{\n    padding: 0;\n    margin: 0;\n  }\n  #cr-content img{\n    max-width: 100% !important;\n    height: auto !important;\n    margin: 30px auto;\n    display: block;\n  }\n  #cr-content table{\n    border-spacing: 0px;\n    border-collapse: collapse;\n  }\n  #cr-content table td, #cr-content table th {\n    text-align: left;\n    font-size: 14px;\n    border-width: 1px;\n    border-style: solid;\n    border-color: rgb(229, 229, 229);\n    border-image: initial;\n    padding: 17px;\n  }\n  #cr-content blockquote {\n    text-decoration: none;\n    opacity: 0.7;\n  }\n  #cr-content blockquote:before {\n    content: 'e244';\n    font-family: 'Material Icons';\n    float: left;\n    font-size: 350%;\n    font-style: normal;\n    font-weight: normal;\n    line-height: 0.6;\n    opacity: 0.2;\n  }\n\n  /* Customize the scrollbar track */\n  ::-webkit-scrollbar {\n    width: 12px;\n  }\n  \n  /* Customize the scrollbar handle */\n  ::-webkit-scrollbar-thumb {\n    background-color: transparent;\n    border-radius: 6px;\n  }\n  \n  /* Customize the scrollbar track on hover */\n  ::-webkit-scrollbar-track:hover {\n    background-color: transparent;\n  }\n",Q="#FFFFFF",Y="#333333",Z="#5F6368",ee="#35363a",oe="#35363a",te="#FFFFFF",ne="#333333",ie="#5F6368",re="#E0E0E0",ae="#FFFFFF",se="#ededed",ce="#464545",le="#464545",de="#ededed",fe="#464545",pe="#E0E0E0",ue="#FFFFFF",he="#F8F1E3",ge="#FFFFFF",me="#333333",_e="#5F6368",ve=(n="custom-theme","on"),$e="on",ye="off",ke="on",be="on",we="on",xe="on",Ce="grey";function Ne(e,t){e?e&&($(t).find("#options-background-color").show(),$(t).find("#options-foreground-color").show(),$(t).find("#options-text-color").show(),$(t).find("#options-link-color").show()):($(t).find("#options-background-color").hide(),$(t).find("#options-foreground-color").hide(),$(t).find("#options-text-color").hide(),$(t).find("#options-link-color").hide())}function Fe(e,t){$(e).find(t).click((function(){let o=$(this).attr("data-clipboard-text");const n=document.createElement("textarea");n.value=o,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),btn_clipboard_copy=$(e).find(t+" .fa-copy"),$("<span class='btn-clipboard-copied'>Copied!</span>").insertBefore(btn_clipboard_copy).fadeOut(1e3,(function(){$(this).remove()}))}))}function Me(e,t){$(e).find(t).tagit({placeholderText:"Tags...",availableTags:["read-it-later","research"],onTagLimitExceeded:function(e,t){},afterTagRemoved:function(o,n){V=$(e).find(t).val()}})}function Ue(e){return"string"==typeof e&&!e.trim()||null==e}function Pe(e){var t=$(e).find("#cr-outline"),o=$(window).width();o<=1280?($(t).hide(),$(t).css("width","0")):($(t).show(),t.css("width","250px")),$(window).resize((function(){(o=$(window).width())<=1280?($(t).hide(),$(t).css("width","0")):($(t).show(),$(t).css("width","250px"))}))}function Se(){return'<div id=\'cr-pre-loader\' style=\'\n      width: 250px;\n      height: 100px;\n      text-align: center;\n      font-family: "Helvetica Neue";\n      font-weight: 200;\n      color: #c1c1c1;\n      letter-spacing: 0.5;\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      -ms-transform: translate(-50%, -50%); /* for IE 9 */\n      -webkit-transform: translate(-50%, -50%); /* for Safari */\n    \'>\n      <style>\n        @keyframes pulse {\n          0% { transform: scale(0.95);box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.3); }\n          70% { transform: scale(1);box-shadow: 0 0 0 10px rgba(0, 0, 0, 0); }\n          100% { transform: scale(0.95);box-shadow: 0 0 0 0 rgba(0, 0, 0, 0); }\n        }\n      </style>\n      <div class="blobs-container text-center" style="margin: 0px auto;margin-bottom: 30px;width: 50px;">\n        <div class="blob" style="\n          background: #dddddd;\n          border-radius: 50%;\n          margin: 10px;\n          height: 20px;\n          width: 20px;\n          box-shadow: 0 0 0 0 rgba(0, 0, 0, 1);\n          transform: scale(1);\n          animation: pulse 2s infinite;"\n        >\n        </div>\n      </div>\n      <p>Loading...</p>\n    </div>'}function Te(e,t){const o=Date.now();o-W>=1e3?W=o:null==W&&(W=0)}function Ee(e){preloader=Se(),$(e).find("body").prepend(preloader)}function Le(){if(document.selection&&document.selection.createRange)return document.selection.createRange().htmlText;if(window.getSelection){var e=window.getSelection();if(e.rangeCount>0){var t=e.getRangeAt(0).cloneContents(),o=document.createElement("div");return o.appendChild(t),o.innerHTML}return""}return""}function Re(){var e,t=document.location,o={spec:t.href,host:t.host,prePath:t.protocol+"//"+t.host,scheme:t.protocol.substr(0,t.protocol.indexOf(":")),pathBase:t.protocol+"//"+t.host+t.pathname.substr(0,t.pathname.lastIndexOf("/")+1)};return selected_text=Le(),e=""!=selected_text?(new DOMParser).parseFromString(selected_text,"text/html"):document.cloneNode(!0),new Readability(o,e).parse()}function ze(e){$(e).find("#cr-content span:contains('Image copyright')").css("display","none"),$(e).find("#cr-content figcaption").css("display","none")}function Ae(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function De(e,t){t.title&&""!=t.title&&$(e).find("#cr-outline-list").append("<li><a href='#cr-title'>"+t.title+"</a></li>"),$(t.content).find("h1, h2, h3, h4, h5, h6").each((function(){var t=$(this).text(),o=Ae(t);$(e).find("#cr-outline-list").append("<li><a href='#"+o+"'>"+t+"</a></li>")}))}function Oe(e){$(e).find("h1, h2, h3, h4, h5, h6").each((function(){var e=Ae($(this).text());"cr-title"!=$(this).attr("id")&&$(this).attr("id",e)}))}function Be(e){style_url=chrome.runtime.getURL("styles/content.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>"),style_url=chrome.runtime.getURL("styles/base.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>"),style_url=chrome.runtime.getURL("styles/options-panel.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>"),style_url=chrome.runtime.getURL("styles/fontawesome-all.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>"),style_url=chrome.runtime.getURL("styles/tag-it.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>"),style_url=chrome.runtime.getURL("styles/semantic.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>")}function t(e){return $(e).is(":checked")?"on":"off"}var Ie=!1;function He(e){start_btn=$(e).find("#options-manual-scroll .start"),stop_btn=$(e).find("#options-manual-scroll .stop"),speed=parseInt($(e).find("#options-scroll-speed input").val()),0==Ie?($(e).find("html, body").animate({scrollTop:$(e).height()},speed),$(start_btn).hide(),$(stop_btn).show(),Ie=!0):($(e).find("body").stop(),$(start_btn).show(),$(stop_btn).hide(),Ie=!1)}function Ve(e){$(e).find("#options-manual-scroll").click((function(){He(e)}))}var qe,Xe,je,Je,Qe,r,a,So,s,c,l,d,f,p,u,h,g,m,_,v,y,k,b,w,x,C,N,F,M,U,P,S,T,E,L,R,To,Ho,We=[];function Ge(e){var t=$(e).find("#cr-content-container"),o=function(e){var t=e.target;qe!=t&&(null!=qe&&$(qe).removeClass("deletion-mode-hovered"),$(t).addClass("deletion-mode-hovered"),qe=t)},n=function(t){let o;t.preventDefault(),selected=t.target,$(selected).removeClass("deletion-mode-hovered");let n=selected.parentNode;o={type:"delete",index:Array.from(n.children).indexOf(selected),parent:n,elem:n.removeChild(selected)},We.push(o),$(e).find("#options-delete-element-undo").show()},i=function(e){27===e.keyCode&&c()},c=function(){$(t).off("mouseover",o),$(t).off("click",n),$(e).off("keydown",i),$(e).find(".deletion-mode-hovered").removeClass("deletion-mode-hovered"),$(e).find("#options-delete-element").show(),$(e).find("#options-delete-element-stop").hide()};$(t).on("mouseover",o),$(t).on("click",n),$(e).on("keydown",i),$(e).find("#options-delete-element-stop").click((function(){c()}))}function Ke(e){let t=We.pop();t&&t.parent.insertBefore(t.elem,t.parent.children[t.index]),0===We.length&&$(e).find("#options-delete-element-undo").hide()}function Ye(e){$(e).find("#cr-content-container").mouseup((function(t){if("Range"!==(Xe=e.getSelection()).type||$(t.target).hasClass("tlite")||$(t.target).hasClass("no-close")||"cr-toolbar-note-form-textarea"==$(t.target).attr("id")){var o="cr-toolbar",n=$(t.target).parent();$(t.target).attr("id")!=o&&$(n).attr("id")!=o&&$(n).parent().attr("id")!=o&&($(e).find("#cr-toolbar").hide(),$(e).find("#cr-toolbar-note-form").hide())}else je=Xe.toString(),Je=Xe.getRangeAt(0).cloneRange(),Ze(Qe=Je.getBoundingClientRect(),e)}))}function Ze(e,t){var o=t.getElementById("cr-toolbar"),n=(o.offsetWidth,o.offsetHeight);o.style.left=(window.pageXOffset+e.x+(e.width-$(o).width())/2)/2,o.style.top=`${e.top-n-50+t.body.scrollTop}px`,$(o).show()}function eo(e){$(e).find("#cr-toolbar-note").click((function(t){$(e).find("#cr-toolbar-note-form").toggle()}))}function oo(e){$(e).find("#cr-toolbar-translate").click((function(){""!=je?so(e,je):alert("Text cannot be empty!")})),$(e).find("#cr-toolbar-search").click((function(){""!=je?ao(je):alert("Text cannot be empty!")})),$(e).find("#cr-toolbar-share-twitter").click((function(){""!=je?ro(je):alert("Text cannot be empty!")}))}function to(e){$(e).find("#options-main-panel .options-panel-header").click((function(){$(this).next().is(":visible")?original_state="visible":original_state="hidden",$(e).find("#options-main-panel .options-panel-header").removeClass("active"),$(e).find("#options-main-panel .options-panel-content").removeClass("active"),$(e).find("#options-main-panel .options-panel-content").hide(),"visible"==original_state?($(this).removeClass("active"),$(this).next().removeClass("active"),$(this).next().slideUp(500)):($(this).addClass("active"),$(this).next().addClass("active"),$(this).next().slideDown(500))}))}function no(e){$(e).on("change","input[type=color]",(function(){$(this.parentNode).next().val($(this).val()),this.parentNode.style.backgroundColor=this.value}))}function io(e){var t=e.split(/\s/g).length/200;return Math.ceil(t)}function ro(e){var t=window.location.href;selectedText=e,selectedText=encodeURIComponent(e),co("https://twitter.com/intent/tweet?text="+('"'+selectedText+'" - '+t+" via @readermode"),"Share",550,295)}function ao(e){co("https://google.com/search?q="+encodeURIComponent(e),"Search",900,540)}function so(e,t){co("https://translate.google.com/#auto/"+$(e).find("#options-translate-to select").find(":selected").val()+"/"+t,"Translate",900,540)}function co(e,t,o,n){let i=screen.width/2-o/2,c=screen.height/2-n/2;return window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+o+", height="+n+", top="+c+", left="+i)}function i(e,t){chrome.storage.sync.set({[e]:t})}function lo(e,t,o){null==T?(T=t,A(e)):T!=t?(r=!0,A(e)):T==t&&(r=!1,A(e)),q=t,o&&chrome.storage.sync.set({cr_font_family:t}),$(e).find("#cr-content-container").css("font-family",t),$(e).find(`#options-font-family select option[value='${t}']`).prop("selected",!0)}function fo(e,t,o){null==E?(E=t,A(e)):E!=t?(a=!0,A(e)):E==t&&(a=!1,A(e)),G=t,o&&chrome.storage.sync.set({cr_font_size:t}),$(e).find("#cr-content-container").css("font-size",t),$(e).find("#options-font-size input").val(t),$(e).find("#options-font-size .val").text(t)}function po(e,t,o){null==L?(L=t,A(e)):L!=t?(So=!0,A(e)):L==t&&(So=!1,A(e)),K=t,o&&chrome.storage.sync.set({cr_line_height:t}),$(e).find("#cr-content-container").css("line-height",t),$(e).find("#options-line-height input").val(t),$(e).find("#options-line-height .val").text(t)}function uo(e,t,o){null==R?(R=t,A(e)):R!=t?(s=!0,A(e)):R==t&&(s=!1,A(e)),X=t,o&&chrome.storage.sync.set({cr_letter_space:t}),$(e).find("#cr-content-container").css("letter-spacing",t),$(e).find("#options-letter-space input").val(t),$(e).find("#options-letter-space .val").text(t)}function ho(e,t,o){null==To?(To=t,A(e)):To!=t?(c=!0,A(e)):To==t&&(c=!1,A(e)),j=t,o&&chrome.storage.sync.set({cr_max_width:t}),j=t,$(e).find("#cr-container").css("max-width",t),$(e).find("#options-max-width .val").attr("value",t),$(e).find("#options-max-width .val").text(t)}function go(e,t,o,n){"light-theme"==o?(Q=te,chrome.storage.sync.set({cr_background_color_light:te}),n&&chrome.storage.sync.set({cr_background_color_light:te})):"dark-theme"==o?(ee=oe,n&&chrome.storage.sync.set({cr_background_color_dark:oe})):"custom-theme"==o&&(he=t,null==S?(S=t,z(e)):S!=t?(l=!0,z(e)):S==t&&(l=!1,z(e)),Te("set background color to ",t),n&&chrome.storage.sync.set({cr_background_color:t})),$(e).find("#cr-body").css("background-color",t),$(e).find("#options-theme ul li a[data-theme='"+o+"']").css("background-color",t),$(e).find("#options-background-color input[name='background_color']").val(t),$(e).find("#options-background-color input[type='color']").val(t),$(e).find("#options-background-color label.color").css("background-color",t)}function mo(e,t,o,n){"light-theme"==o?(se=de,n&&chrome.storage.sync.set({cr_foreground_color_light:de})):"dark-theme"==o?(ce=fe,n&&chrome.storage.sync.set({cr_foreground_color_dark:fe})):"custom-theme"==o&&(ge=t,null==P?(P=t,z(e)):P!=t?(d=!0,z(e)):P==t&&(d=!1,z(e)),Te("set Foreground color to ",t),n&&chrome.storage.sync.set({cr_foreground_color:t})),$(e).find("#reader-foreground").css({"background-color":t,"box-shadow":"0 8px 16px rgba(0, 0, 0, 0.1)"}),$(e).find("#options-foreground-color input[name='foreground_color']").val(t),$(e).find("#options-foreground-color input[type='color']").val(t),$(e).find("#options-foreground-color label.color").css("background-color",t)}function _o(e,t,o,n){"light-theme"==o?(Y=t,n&&chrome.storage.sync.set({cr_text_color_light:t})):"dark-theme"==o?(pe=t,n&&chrome.storage.sync.set({cr_text_color_dark:t})):"custom-theme"==o&&(null==U?(U=t,z(e)):U!=t?(f=!0,z(e)):U==t&&(f=!1,z(e)),me=t,n&&chrome.storage.sync.set({cr_text_color:t})),$(e).find("#cr-body").css("color",t),$(e).find("#cr-outline a").css("color",t),$(e).find("#cr-content table td").css("color",t),$(e).find("#cr-content table tr").css("color",t),$(e).find("#cr-content table th").css("color",t),$(e).find("#cr-content table").css("border-color",t),$(e).find("#options-text-color input[name='text_color']").val(t),$(e).find("#options-text-color input[type='color']").val(t),$(e).find("#options-text-color label.color").css("background-color",t)}function vo(e,t,o,n){"light-theme"==o?(Z=t,n&&chrome.storage.sync.set({cr_link_color_light:t})):"dark-theme"==o?(ue=t,n&&chrome.storage.sync.set({cr_link_color_dark:t})):"custom-theme"==o&&(_e=t,null==M?(M=t,z(e)):M!=t?(p=!0,z(e)):M==t&&(p=!1,z(e)),n&&chrome.storage.sync.set({cr_link_color:t})),$(e).find("#cr-body").find("a:not(#cr-outline a)").css("color",t),$(e).find("#options-link-color input[name='link_color']").val(t),$(e).find("#options-link-color input[type='color']").val(t),$(e).find("#options-link-color label.color").css("background-color",t)}function $o(e,t,o){n=t,o&&chrome.storage.sync.set({cr_theme:t}),$(e).find("#options-theme ul li a").each((function(){$(this).attr("data-theme")==t?$(this).addClass("active"):$(this).removeClass("active")})),$(e).find("#cr-body").attr("class",t),"light-theme"==t?(Ne(!1,e),go(e,Q.toUpperCase(),"light-theme"),mo(e,se.toUpperCase(),"light-theme"),_o(e,Y.toUpperCase(),"light-theme"),vo(e,Z.toUpperCase(),"light-theme"),$(e).find("::-webkit-scrollbar-track").css("background",Q.toUpperCase())):"dark-theme"==t?(Ne(!1,e),go(e,ee.toUpperCase(),"dark-theme"),mo(e,ce.toUpperCase(),"dark-theme"),_o(e,pe.toUpperCase(),"dark-theme"),vo(e,ue.toUpperCase(),"dark-theme"),$(e).find("::-webkit-scrollbar-track").css("background",ee.toUpperCase())):"custom-theme"==t&&(Ne(!0,e),go(e,he.toUpperCase(),"custom-theme"),mo(e,ge.toUpperCase(),"custom-theme"),_o(e,me.toUpperCase(),"custom-theme"),vo(e,_e.toUpperCase(),"custom-theme"),$(e).find("::-webkit-scrollbar-track").css("background",he.toUpperCase())),i("cr_theme",n)}function yo(e,t,o){null==w?(w=t,D(e)):w!=t?(g=!0,D(e)):w==t&&(g=!1,D(e)),"on"==t?($(e).find("#cr-outline").show(),$(e).find("#options-display-outline input").prop("checked",!0)):($(e).find("#cr-outline").hide(),$(e).find("#options-display-outline input").prop("checked",!1)),ye=t,o&&(chrome.storage.sync.set({cr_display_outline:t}),w=t)}function ko(e,t,o){null==x?(x=t,D(e)):x!=t?(m=!0,D(e)):x==t&&(m=!1,D(e)),"on"==t?($(e).find("#cr-content-container img").show(),$(e).find("#options-display-images input").prop("checked",!0)):($(e).find("#cr-content-container img").hide(),$(e).find("#options-display-images input").prop("checked",!1)),o&&(ke=t,chrome.storage.sync.set({cr_display_images:t}),x=t)}function bo(e,t,o){null==C?(C=t,D(e)):C!=t?(_=!0,D(e)):C==t&&(_=!1,D(e)),"on"==t?($(e).find("#cr-container #cr-meta").show(),$(e).find("#options-display-meta input").prop("checked",!0),$(e).find("#options-display-author").show(),$(e).find("#options-display-reading-time").show()):($(e).find("#cr-container #cr-meta").hide(),$(e).find("#options-display-meta input").prop("checked",!1),$(e).find("#options-display-author").hide(),$(e).find("#options-display-reading-time").hide()),o&&(be=t,chrome.storage.sync.set({cr_display_meta:t}),C=t)}function wo(e,t,o){null==N?(N=t,D(e)):N!=t?(v=!0,D(e)):N==t&&(v=!1,D(e)),"on"==t?($(e).find("#cr-container #cr-meta-author").show(),$(e).find("#options-display-author input").prop("checked",!0)):($(e).find("#cr-container #cr-meta-author").hide(),$(e).find("#options-display-author input").prop("checked",!1)),o&&(we=t,chrome.storage.sync.set({cr_display_author:t}),N=t)}function xo(e,t,o){null==F?(F=t,D(e)):F!=t?(y=!0,D(e)):F==t&&(y=!1,D(e)),"on"==t?($(e).find("#cr-container #cr-meta-reading-time").show(),$(e).find("#options-display-reading-time input").prop("checked",!0)):($(e).find("#cr-container #cr-meta-reading-time").hide(),$(e).find("#options-display-reading-time input").prop("checked",!1)),o&&(xe=t,chrome.storage.sync.set({cr_display_reading_time:t}),F=t)}function Co(e,t,o){null==k?(k=t,D(e)):k!=t?(u=!0,D(e)):k==t&&(u=!1,D(e)),"on"==t?($(e).find("#cr-container .options-panel").addClass("options-panel-dark"),$(e).find("#options-dark-panel input").prop("checked",!0),$(e).find(".btn-save-changes span").css("color","white"),$(e).find(".btn-save-changes").css("border","2px solid white"),$(e).find(".btn-save-changes").addClass("dark-hover"),$(e).find(".btn-save-changes").addClass("dark-active"),$(e).find(".btn-save-changes").removeClass("light-hover"),$(e).find(".btn-save-changes").removeClass("light-active"),Ce="white"):($(e).find("#cr-container .options-panel").attr("class","options-panel"),$(e).find("#options-dark-panel input").prop("checked",!1),$(e).find(".btn-save-changes span").css("color","black"),$(e).find(".btn-save-changes").css("border","2px solid black"),$(e).find(".btn-save-changes").addClass("light-hover"),$(e).find(".btn-save-changes").addClass("light-active"),$(e).find(".btn-save-changes").removeClass("dark-hover"),$(e).find(".btn-save-changes").removeClass("dark-active"),Ce="black"),o&&(ve=t,chrome.storage.sync.set({cr_dark_panel:t}),k=t)}function No(e,t,o){null==b?(b=t,D(e)):b!=t?(h=!0,D(e)):b==t&&(h=!1,D(e)),"on"==t?($(e).find("#cr-container #cr-footer").show(),$(e).find("#options-display-footer input").prop("checked",!0)):($(e).find("#cr-container #cr-footer").hide(),$(e).find("#options-display-footer input").prop("checked",!1)),o&&(be=t,chrome.storage.sync.set({cr_display_meta:t}),b=t)}function Fo(e,t,o){o&&(J=t,chrome.storage.sync.set({cr_default_css:t})),$(e).find("#options-default-css textarea").html(t),0==$(e).find("#cr_default_css").length&&$("<style id='cr_default_css'>").text(t).appendTo(e.head),$(e).find("#cr_default_css").html(t)}function Mo(e){chrome.storage.sync.get(["cr_font_family"],(function(t){lo(e,t.cr_font_family?t.cr_font_family:"Arial",!0)})),chrome.storage.sync.get(["cr_font_size"],(function(t){fo(e,t.cr_font_size?t.cr_font_size:16,!0)})),chrome.storage.sync.get(["cr_line_height"],(function(t){po(e,t.cr_line_height?t.cr_line_height:1.84,!0)})),chrome.storage.sync.get(["cr_letter_space"],(function(t){uo(e,t.cr_letter_space?t.cr_letter_space:0,!0)})),chrome.storage.sync.get(["cr_max_width"],(function(t){ho(e,t.cr_max_width?t.cr_max_width:680,!0)})),chrome.storage.sync.get(["cr_default_css"],(function(t){t.cr_default_css?Fo(e,t.cr_default_css,!0):fetch(chrome.runtime.getURL("styles/default.css")).then((e=>e.text())).then((t=>{Fo(e,t,!0),J=t}))})),chrome.storage.sync.get(["cr_background_color_light"],(function(t){go(e,te,"light-theme",!0)})),chrome.storage.sync.get(["cr_foreground_color_light"],(function(t){mo(e,de,"light-theme",!0)})),chrome.storage.sync.get(["cr_text_color_light"],(function(t){_o(e,ne,"light-theme",!0)})),chrome.storage.sync.get(["cr_link_color_light"],(function(t){vo(e,ie,"light-theme",!0)})),chrome.storage.sync.get(["cr_background_color_dark"],(function(t){go(e,oe,"dark-theme",!0)})),chrome.storage.sync.get(["cr_foreground_color_dark"],(function(t){mo(e,fe,"dark-theme",!0)})),chrome.storage.sync.get(["cr_text_color_dark"],(function(t){_o(e,re,"dark-theme",!0)})),chrome.storage.sync.get(["cr_link_color_dark"],(function(t){vo(e,ae,"dark-theme",!0)})),chrome.storage.sync.get(["cr_background_color"],(function(t){go(e,t.cr_background_color?t.cr_background_color.toUpperCase():"#F8F1E3","custom-theme",!0)})),chrome.storage.sync.get(["cr_foreground_color"],(function(t){mo(e,t.cr_foreground_color?t.cr_foreground_color.toUpperCase():"#FFFFFF","custom-theme",!0)})),chrome.storage.sync.get(["cr_text_color"],(function(t){_o(e,t.cr_text_color?t.cr_text_color:"#333333","custom-theme",!0)})),chrome.storage.sync.get(["cr_link_color"],(function(t){vo(e,t.cr_link_color?t.cr_link_color:"#5F6368","custom-theme",!0)})),chrome.storage.sync.get(["cr_theme"],(function(t){$o(e,t.cr_theme?t.cr_theme:"custom-theme",!0)})),chrome.storage.sync.get(["cr_dark_panel"],(function(t){Co(e,t.cr_dark_panel?t.cr_dark_panel:"on",!0)})),chrome.storage.sync.get(["cr_display_footer"],(function(t){No(e,t.cr_display_footer?t.cr_display_footer:"on",!0)})),chrome.storage.sync.get(["cr_display_outline"],(function(t){yo(e,t.cr_display_outline?t.cr_display_outline:"off",!0)})),chrome.storage.sync.get(["cr_display_images"],(function(t){ko(e,t.cr_display_images?t.cr_display_images:"on",!0)})),chrome.storage.sync.get(["cr_display_meta"],(function(t){bo(e,t.cr_display_meta?t.cr_display_meta:"on",!0)})),chrome.storage.sync.get(["cr_display_author"],(function(t){wo(e,t.cr_display_author?t.cr_display_author:"on",!0)})),chrome.storage.sync.get(["cr_display_reading_time"],(function(t){xo(e,t.cr_display_reading_time?t.cr_display_reading_time:"on",!0)}))}function Uo(e){var t=e.contentWindow.document;$(t).find("#options-menu li a").click((function(){$(t).find("#options-menu li a").attr("class","tooltip"),this_menu=$(this),$(t).find(".options-panel").each((function(e,t){$(this_menu).attr("data-panel")==$(t).attr("id")?$(t).is(":visible")?$(t).hide():($(this_menu).addClass("active"),$(t).show()):$(t).hide()}))})),$(t).find("#options-delete-element").click((function(){$(this).hide(),$(t).find("#options-delete-element-stop").show(),Ge(t)})),$(t).find("#options-delete-element-undo").click((function(){Ke(t)})),$(t).find("#options-fullscreen").click((function(){fullscreen.toggle($("#container")[0]).then((function(){fullscreen.isFullscreen?($(t).find("#options-fullscreen i.enter").hide(),$(t).find("#options-fullscreen i.exit").show()):($(t).find("#options-fullscreen i.enter").show(),$(t).find("#options-fullscreen i.exit").hide())}))})),$(t).find("#options-print").click((function(){$(t).find("#reader-foreground").css({"box-shadow":"0 0px 0px rgba(0, 0, 0, 0.1)"}),e.contentWindow.print(),$(t).find("#reader-foreground").css({"box-shadow":"0 8px 16px rgba(0, 0, 0, 0.1)"})})),$(t).find("#options-saved-panel a.close").click((function(){$(t).find("#options-menu li a").attr("class","tooltip"),$(t).find("#options-saved-panel").hide()})),$(t).find("#options-close").click((function(){qo()}))}function Po(e){$(e).click((function(t){target=$(t.target),setTimeout((function(){$(e).find(".options-panel").each((function(){id="#"+$(this).attr("id"),$(e).find(id).is(":visible")&&"#options-saved-panel"!=id&&(target.parents(id).length||target.parents("#options-menu").length||($(e).find(id).hide(),$(e).find("#options-menu li a").removeClass("active")))}))}),100)}))}function Eo(e){$(e).find("#options-font-family select").change((function(){lo(e,$(this).val())})),$(e).find("#options-font-size input").on("input change",(function(){fo(e,$(this).val())})),$(e).find("#options-line-height input").on("input change",(function(){po(e,$(this).val())})),$(e).find("#options-letter-space input").on("input change",(function(){uo(e,$(this).val())})),$(e).find("#options-max-width input").on("input change",(function(){ho(e,$(this).val())})),$(e).find(".options-panel-content button[name='save-options-themes'], .options-panel-content button[name='save-options-style'], .options-panel-content button[name='save-options-reader-components']").click((function(e){}),A(e))}function Lo(e){return n=$(e).find("#options-theme ul li a.active").attr("data-theme")}function z(e){r||a||So||s||c||u||h||g||m||_||v||y||l||d||p||f?($(e).find(".options-panel-content button[name='save-options-style']").show(),$(e).find(".options-panel-content button[name='save-options-themes']").show(),$(e).find(".options-panel-content button[name='save-options-reader-components']").show(),Oo(e)):($(e).find(".options-panel-content button[name='save-options-style']").hide(),$(e).find(".options-panel-content button[name='save-options-themes']").hide(),$(e).find(".options-panel-content button[name='save-options-reader-components']").hide())}function A(e){r||a||So||s||c||u||h||g||m||_||v||y||l||d||p||f?($(e).find(".options-panel-content button[name='save-options-style']").show(),$(e).find(".options-panel-content button[name='save-options-themes']").show(),$(e).find(".options-panel-content button[name='save-options-reader-components']").show(),Oo(e)):($(e).find(".options-panel-content button[name='save-options-style']").hide(),$(e).find(".options-panel-content button[name='save-options-themes']").hide(),$(e).find(".options-panel-content button[name='save-options-reader-components']").hide())}function D(e){r||a||So||s||c||u||h||g||m||_||v||y||l||d||p||f?($(e).find(".options-panel-content button[name='save-options-style']").show(),$(e).find(".options-panel-content button[name='save-options-themes']").show(),$(e).find(".options-panel-content button[name='save-options-reader-components']").show(),Oo(e)):($(e).find(".options-panel-content button[name='save-options-style']").hide(),$(e).find(".options-panel-content button[name='save-options-themes']").hide(),$(e).find(".options-panel-content button[name='save-options-reader-components']").hide())}function Ro(e){$(e).find("#options-theme ul li a").click((function(){n=$(this).attr("data-theme"),$o(e,n)})),$(e).find("#options-background-color input").on("input change",(function(){go(e,$(this).val().toUpperCase(),Lo(e))})),$(e).find("#options-foreground-color input").on("input change",(function(){mo(e,$(this).val().toUpperCase(),Lo(e))})),$(e).find("#options-text-color input").on("input change",(function(){_o(e,$(this).val(),Lo(e))})),$(e).find("#options-link-color input").on("input change",(function(){vo(e,$(this).val(),Lo(e))})),$(e).find(".options-panel-content button[name='save-options-themes'], .options-panel-content button[name='save-options-style'], .options-panel-content button[name='save-options-reader-components']").click((function(e){}),z(e,!1))}function zo(e){$(e).find("#options-dark-panel input").change((function(){Co(e,t($(this)))})),$(e).find("#options-display-footer input").change((function(){No(e,t($(this)))})),$(e).find("#options-display-outline input").change((function(){yo(e,t($(this)))})),$(e).find("#options-display-images input").change((function(){ko(e,t($(this)))})),$(e).find("#options-display-meta input").change((function(){bo(e,t($(this)))})),$(e).find("#options-display-author input").change((function(){wo(e,t($(this)))})),$(e).find("#options-display-reading-time input").change((function(){xo(e,t($(this)))})),$(e).find("#sitelinkcopy").click((function(e){e.preventDefault();var t=$(this),o=t.attr("href");o&&navigator.clipboard.writeText(o).then((()=>{t.hide();var e=$('<span class="copy-message">Link copied!</span>');t.after(e),setTimeout((function(){e.remove(),t.show()}),1e3)}))})),$(e).find(".options-panel-content button[name='save-options-themes'], .options-panel-content button[name='save-options-style'], .options-panel-content button[name='save-options-reader-components']").click((function(o){q=$(e).find("#options-font-family select").find(":selected").val(),G=$(e).find("#options-font-size input").val().trim(),K=$(e).find("#options-line-height input").val().trim(),X=$(e).find("#options-letter-space input").val().trim(),j=$(e).find("#options-max-width input").val().trim(),n=Lo(e),cr_background_color_active=$(e).find("#options-background-color input[name='background_color']").val().trim().toUpperCase(),cr_foreground_color_active=$(e).find("#options-foreground-color input[name='foreground_color']").val().trim().toUpperCase(),cr_text_color_active=$(e).find("#options-text-color input[name='text_color']").val().trim().toUpperCase(),cr_link_color_active=$(e).find("#options-link-color input[name='link_color']").val().trim().toUpperCase(),cr_auto_dark_panel=t($(e).find("#options-dark-panel input")),$e=t($(e).find("#options-display-footer input")),ye=t($(e).find("#options-display-outline input")),ke=t($(e).find("#options-display-images input")),be=t($(e).find("#options-display-meta input")),we=t($(e).find("#options-display-author input")),xe=t($(e).find("#options-display-reading-time input")),cr_display_saved_info=t($(e).find("#options-display-saved-info input")),r&&(i("cr_font_family",q),T=q,r=!1),a&&(i("cr_font_size",G),E=G,a=!1),So&&(i("cr_line_height",K),L=K,a=!1),s&&(i("cr_letter_space",X),R=X,s=!1),c&&(i("cr_max_width",j),To=j,c=!1),A(e),"light-theme"==n?(Q=cr_background_color_active,se=cr_foreground_color_active,Y=cr_text_color_active,Z=cr_link_color_active,i("cr_background_color_light",cr_background_color_active),i("cr_foreground_color_light",cr_foreground_color_active),i("cr_text_color_light",cr_text_color_active),i("cr_link_color_light",cr_link_color_active)):"dark-theme"==n?(ee=cr_background_color_active,ce=cr_foreground_color_active,pe=cr_text_color_active,ue=cr_link_color_active,i("cr_background_color_dark",cr_background_color_active),i("cr_foreground_color_dark",cr_foreground_color_active),i("cr_text_color_dark",cr_text_color_active),i("cr_link_color_dark",cr_link_color_active)):"custom-theme"==n&&(cr_background_color_custom=cr_background_color_active,cr_foreground_color_custom=cr_foreground_color_active,cr_text_color_custom=cr_text_color_active,cr_link_color_custom=cr_link_color_active,l&&(i("cr_background_color",cr_background_color_active),S=cr_background_color_active,l=!1),d&&(i("cr_foreground_color",cr_foreground_color_active),P=cr_foreground_color_active,d=!1),f&&(i("cr_text_color",cr_text_color_active),U=cr_text_color_active,f=!1),p&&(i("cr_link_color",cr_link_color_active),M=cr_link_color_active,p=!1)),$o(e,n),z(e),u&&(i("cr_dark_panel",cr_auto_dark_panel),k=cr_auto_dark_panel,u=!1),h&&(i("cr_display_footer",$e),b=$e,h=!1),g&&(i("cr_display_outline",ye),w=ye,g=!1),m&&(i("cr_display_images",ke),x=ke,m=!1),_&&(i("cr_display_meta",be),C=be,_=!1),v&&(i("cr_display_author",we),N=we,v=!1),y&&(i("cr_display_reading_time",xe),F=xe,y=!1),D(e),Do(e,o)}),D(e))}function Ao(e,t,o,n){if("copylink"){let t=e.createElement("div");var i;t.classList.add("toast"),t.innerHTML=o,$(e).find("#toastBox").append(t),$(e).find(".toast").css({"text-color":"black"}),t.classList.add("copylink"),i=2400,$(e).find(".toast").click((function(e){$(this).remove()})),setTimeout((()=>{t.remove()}),i)}}function Do(e,t){var o=$("<span class='text-info save-label' id='ui-save-label'>Saved!</span>"),n=$($(t.target).closest("button")).attr("name");if("save-options-reader-components"==n)var i=1*$(t.target).closest("button").outerHeight(),c=10;else if("save-options-themes"==n)i=1*$(t.target).closest("button").outerHeight(),c=20;else if("save-options-style"==n)i=1*$(t.target).closest("button").outerHeight(),c=30;var r={"font-family":$(t.target).closest("button").css("font-family"),"font-size":$(t.target).closest("button").css("font-size"),"font-weight":$(t.target).closest("button").css("font-weight"),"font-style":$(t.target).css("font-style"),color:Ce};o.css(r),o.css("height",i+"px"),o.css("padding-top",c+"px"),o.insertAfter($(t.target).closest("button")),o.fadeOut(1500,(function(){$(this).remove()}))}function Oo(e){var t=$(e).find("#ui-save-label");t.length>0&&t.remove()}function Bo(e){switch(e){case 0:r=!0;case 1:a=!0;case 2:So=!0;case 3:s=!0;case 4:c=!0;case 5:l=!0;case 6:d=!0;case 7:f=!0;case 8:p=!0;case 9:u=!u;case 10:h=!h;case 11:g=!g;case 12:m=!m;case 13:_=!_;case 14:v=!v;case 15:y=!y}}function Io(){var t=document.getElementById("cr-iframe"),o=t.contentWindow.document,n=Re();if(O=n.title,e=n.excerpt,B=n.content,I=window.location.href,""==n.byline||"About 0 Minutes"==n.byline)var i="Unknown author";else i=n.byline;H=io(O+" "+B)+" min read",B=B.replace("Media playback is unsupported on your device",""),fetch(chrome.runtime.getURL("/content.html")).then((e=>e.text())).then((e=>{o.open(),o.write(e),o.close(),Ee(o),De(o,n),$(o).find("#cr-title").html(O),$(o).find("#cr-content").html(B),Oe(o),$(o).find("#cr-content a").attr("target","_blank"),I&&$(o).find("#cr-meta").append("<li id='cr-meta-url'><i class='fas fa-link'></i><span class='truncated'><a id='sitelinkcopy' href='"+I+"'  target='_blank' >"+I+"</a></span><li>"),i&&$(o).find("#cr-meta").append("<li id='cr-meta-author'><i class='fas fa-pen-fancy'></i><span class='cr-author truncated'>"+i+"</span><li>"),H&&$(o).find("#cr-meta").append("<li id='cr-meta-reading-time'><i class='far fa-clock'></i><span>"+H+"</span><li>"),ze(o),Be(o),Ye(o),eo(o),oo(o),Mo(o),Uo(t),Po(o),Ve(o),to(o),no(o),Eo(o),Ro(o),zo(o),$(o).find("body").css("margin",0),$(t).show(),setTimeout((function(){$(o).find("#cr-pre-loader").fadeOut(),$(o).find("#cr-body").show()}),500)})).catch((e=>{alert("Something went wrong... "+e)}))}function Vo(){if(null==document.getElementById("cr-iframe")){var e=Wo();document.body.appendChild(e),Ho=window.location.href,Io()}else qo(e)}function Wo(){document.body.style.overflow="hidden";var e=document.createElement("iframe");return e.id="cr-iframe",e.style.height="100%",e.style.width="100%",e.style.position="fixed",e.style.top="0px",e.style.right="0px",e.style.zIndex="9000000000000000000",e.frameBorder="none",e.style.backgroundColor="#fff",preloader=Se(),$(e).contents().find("body").html(preloader),e}function qo(){$("#cr-iframe").remove(),iframe=null,document.body.style.overflow="auto"}Vo();