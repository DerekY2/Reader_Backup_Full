var i,e,c,a,t,s,N,n,r="custom-theme",l="Arial",d=16,f=1,p=0,u=680,D="\n  #cr-body {\n    font-family: Arial, Helvetica, sans-serif;\n    font-size: 14px;\n  }\n\n  #cr-body a{\n    text-decoration: none;\n  }\n\n  #cr-meta{\n  }\n\n  #cr-outline{\n    width: 250px;\n    position: fixed;\n    top: 65px;\n    left: 30px;\n  }\n\n  #cr-content-wrapper a{\n    text-decoration: underline;\n  }\n\n  h1#cr-title,\n  #cr-content h1,\n  #cr-content h2,\n  #cr-content h3,\n  #cr-content h4,\n  #cr-content h5,\n  #cr-content h6 {\n    font-weight: 700;\n    line-height: 1.3em;\n    font-family: inherit;\n    margin-top: 1.6em;\n    margin-bottom: 0.8em;\n  }\n  #cr-content #cr-title{\n    margin-top: 40px;\n  }\n  #cr-content p{\n    word-break: break-word;\n    margin-top: 1.5em;\n    margin-bottom: 1.5em;\n  }\n  #cr-content figure{\n    padding: 0;\n    margin: 0;\n  }\n  #cr-content img{\n    max-width: 100% !important;\n    height: auto !important;\n    margin: 30px auto;\n    display: block;\n  }\n  #cr-content table{\n    border-spacing: 0px;\n    border-collapse: collapse;\n  }\n  #cr-content table td, #cr-content table th {\n    text-align: left;\n    font-size: 14px;\n    border-width: 1px;\n    border-style: solid;\n    border-color: rgb(229, 229, 229);\n    border-image: initial;\n    padding: 17px;\n  }\n  #cr-content blockquote {\n    text-decoration: none;\n    opacity: 0.7;\n  }\n  #cr-content blockquote:before {\n    content: 'e244';\n    font-family: 'Material Icons';\n    float: left;\n    font-size: 350%;\n    font-style: normal;\n    font-weight: normal;\n    line-height: 0.6;\n    opacity: 0.2;\n  }\n\n  /* Customize the scrollbar track */\n  ::-webkit-scrollbar {\n    width: 12px;\n  }\n  \n  /* Customize the scrollbar handle */\n  ::-webkit-scrollbar-thumb {\n    background-color: transparent;\n    border-radius: 6px;\n  }\n  \n  /* Customize the scrollbar track on hover */\n  ::-webkit-scrollbar-track:hover {\n    background-color: transparent;\n  }\n",h="#FFFFFF",_="#333333",g="#5F6368",m="#35363a",y="#35363a",v="#FFFFFF",H="#333333",W="#5F6368",q="#E0E0E0",P="#FFFFFF",k="#ededed",b="#464545",X="#464545",x="#ededed",w="#464545",F="#E0E0E0",C="#FFFFFF",j="#F8F1E3",G="#FFFFFF",J="#333333",K="#5F6368",Q=(r="custom-theme","on"),z="on",V="off",R="off",Y="on",T="on",Z="on",ee="on";function te(e,t){e?e&&($(t).find("#options-background-color").show(),$(t).find("#options-foreground-color").show(),$(t).find("#options-text-color").show(),$(t).find("#options-link-color").show(),console.log("showed")):($(t).find("#options-background-color").hide(),$(t).find("#options-foreground-color").hide(),$(t).find("#options-text-color").hide(),$(t).find("#options-link-color").hide(),console.log("hidden"))}function oe(e,t){$(e).find(t).click((function(){let o=$(this).attr("data-clipboard-text");const n=document.createElement("textarea");n.value=o,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),btn_clipboard_copy=$(e).find(t+" .fa-copy"),$("<span class='btn-clipboard-copied'>Copied!</span>").insertBefore(btn_clipboard_copy).fadeOut(1e3,(function(){$(this).remove()}))}))}function ne(e,t){$(e).find(t).tagit({placeholderText:"Tags...",availableTags:["read-it-later","research"],onTagLimitExceeded:function(e,t){},afterTagRemoved:function(o,n){N=$(e).find(t).val()}})}function re(e){return"string"==typeof e&&!e.trim()||null==e}function ie(e){var t=$(e).find("#cr-outline"),o=$(window).width();o<=1280?($(t).hide(),$(t).css("width","0")):($(t).show(),t.css("width","250px")),$(window).resize((function(){(o=$(window).width())<=1280?($(t).hide(),$(t).css("width","0")):($(t).show(),$(t).css("width","250px"))}))}function ce(){return'<div id=\'cr-pre-loader\' style=\'\n      width: 250px;\n      height: 100px;\n      text-align: center;\n      font-family: "Helvetica Neue";\n      font-weight: 200;\n      color: #c1c1c1;\n      letter-spacing: 0.5;\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      -ms-transform: translate(-50%, -50%); /* for IE 9 */\n      -webkit-transform: translate(-50%, -50%); /* for Safari */\n    \'>\n      <style>\n        @keyframes pulse {\n          0% { transform: scale(0.95);box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.3); }\n          70% { transform: scale(1);box-shadow: 0 0 0 10px rgba(0, 0, 0, 0); }\n          100% { transform: scale(0.95);box-shadow: 0 0 0 0 rgba(0, 0, 0, 0); }\n        }\n      </style>\n      <div class="blobs-container text-center" style="margin: 0px auto;margin-bottom: 30px;width: 50px;">\n        <div class="blob" style="\n          background: #dddddd;\n          border-radius: 50%;\n          margin: 10px;\n          height: 20px;\n          width: 20px;\n          box-shadow: 0 0 0 0 rgba(0, 0, 0, 1);\n          transform: scale(1);\n          animation: pulse 2s infinite;"\n        >\n        </div>\n      </div>\n      <p>Loading...</p>\n    </div>'}function ae(e,t){const o=Date.now();o-n>=1e3?(console.log(e,t),n=o):null==n&&(n=0)}function se(e){preloader=ce(),$(e).find("body").prepend(preloader)}function le(){if(document.selection&&document.selection.createRange)return document.selection.createRange().htmlText;if(window.getSelection){var e=window.getSelection();if(e.rangeCount>0){var t=e.getRangeAt(0).cloneContents(),o=document.createElement("div");return o.appendChild(t),o.innerHTML}return""}return""}function de(){var e,t=document.location,o={spec:t.href,host:t.host,prePath:t.protocol+"//"+t.host,scheme:t.protocol.substr(0,t.protocol.indexOf(":")),pathBase:t.protocol+"//"+t.host+t.pathname.substr(0,t.pathname.lastIndexOf("/")+1)};return selected_text=le(),e=""!=selected_text?(new DOMParser).parseFromString(selected_text,"text/html"):document.cloneNode(!0),new Readability(o,e).parse()}function fe(e){$(e).find("#cr-content span:contains('Image copyright')").css("display","none"),$(e).find("#cr-content figcaption").css("display","none")}function pe(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function ue(e,t){t.title&&""!=t.title&&$(e).find("#cr-outline-list").append("<li><a href='#cr-title'>"+t.title+"</a></li>"),$(t.content).find("h1, h2, h3, h4, h5, h6").each((function(){var t=$(this).text(),o=pe(t);$(e).find("#cr-outline-list").append("<li><a href='#"+o+"'>"+t+"</a></li>")}))}function he(e){$(e).find("h1, h2, h3, h4, h5, h6").each((function(){var e=pe($(this).text());"cr-title"!=$(this).attr("id")&&$(this).attr("id",e)}))}function _e(e){style_url=chrome.runtime.getURL("styles/content.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>"),style_url=chrome.runtime.getURL("styles/base.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>"),style_url=chrome.runtime.getURL("styles/options-panel.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>"),style_url=chrome.runtime.getURL("styles/fontawesome-all.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>"),style_url=chrome.runtime.getURL("styles/tag-it.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>"),style_url=chrome.runtime.getURL("styles/semantic.css"),$(e).find("head").append("<link rel='stylesheet' type='text/css' href='"+style_url+"'>")}function o(e){return $(e).is(":checked")?"on":"off"}var ge=!1;function me(e){start_btn=$(e).find("#options-manual-scroll .start"),stop_btn=$(e).find("#options-manual-scroll .stop"),speed=parseInt($(e).find("#options-scroll-speed input").val()),0==ge?($(e).find("html, body").animate({scrollTop:$(e).height()},speed),$(start_btn).hide(),$(stop_btn).show(),ge=!0):($(e).find("body").stop(),$(start_btn).show(),$(stop_btn).hide(),ge=!1)}function $e(e){$(e).find("#options-manual-scroll").click((function(){me(e)}))}var E,S,L,be,xe,nt,ye=[];function ve(e){var t=$(e).find("#cr-content-container"),o=function(e){var t=e.target;E!=t&&(null!=E&&$(E).removeClass("deletion-mode-hovered"),$(t).addClass("deletion-mode-hovered"),E=t)},n=function(t){let o;t.preventDefault(),selected=t.target,$(selected).removeClass("deletion-mode-hovered");let n=selected.parentNode;o={type:"delete",index:Array.from(n.children).indexOf(selected),parent:n,elem:n.removeChild(selected)},ye.push(o),$(e).find("#options-delete-element-undo").show()},i=function(e){27===e.keyCode&&r()},r=function(){$(t).off("mouseover",o),$(t).off("click",n),$(e).off("keydown",i),$(e).find(".deletion-mode-hovered").removeClass("deletion-mode-hovered"),$(e).find("#options-delete-element").show(),$(e).find("#options-delete-element-stop").hide()};$(t).on("mouseover",o),$(t).on("click",n),$(e).on("keydown",i),$(e).find("#options-delete-element-stop").click((function(){r()}))}function ke(e){let t=ye.pop();t&&t.parent.insertBefore(t.elem,t.parent.children[t.index]),0===ye.length&&$(e).find("#options-delete-element-undo").hide()}function we(e){$(e).find("#cr-content-container").mouseup((function(t){if("Range"!==(S=e.getSelection()).type||$(t.target).hasClass("tlite")||$(t.target).hasClass("no-close")||"cr-toolbar-note-form-textarea"==$(t.target).attr("id")){var o="cr-toolbar",n=$(t.target).parent();$(t.target).attr("id")!=o&&$(n).attr("id")!=o&&$(n).parent().attr("id")!=o&&($(e).find("#cr-toolbar").hide(),$(e).find("#cr-toolbar-note-form").hide())}else L=S.toString(),be=S.getRangeAt(0).cloneRange(),Fe(xe=be.getBoundingClientRect(),e)}))}function Fe(e,t){var o=t.getElementById("cr-toolbar"),n=(o.offsetWidth,o.offsetHeight);o.style.left=(window.pageXOffset+e.x+(e.width-$(o).width())/2)/2,o.style.top=`${e.top-n-50+t.body.scrollTop}px`,$(o).show()}function Ce(e){$(e).find("#cr-toolbar-note").click((function(t){$(e).find("#cr-toolbar-note-form").toggle()}))}function ze(e){$(e).find("#cr-toolbar-translate").click((function(){""!=L?Ue(e,L):alert("Text cannot be empty!")})),$(e).find("#cr-toolbar-search").click((function(){""!=L?Le(L):alert("Text cannot be empty!")})),$(e).find("#cr-toolbar-share-twitter").click((function(){""!=L?Se(L):alert("Text cannot be empty!")}))}function Re(e){$(e).find("#options-main-panel .options-panel-header").click((function(){$(this).next().is(":visible")?original_state="visible":original_state="hidden",$(e).find("#options-main-panel .options-panel-header").removeClass("active"),$(e).find("#options-main-panel .options-panel-content").removeClass("active"),$(e).find("#options-main-panel .options-panel-content").hide(),"visible"==original_state?($(this).removeClass("active"),$(this).next().removeClass("active"),$(this).next().slideUp(500)):($(this).addClass("active"),$(this).next().addClass("active"),$(this).next().slideDown(500))}))}function Te(e){$(e).on("change","input[type=color]",(function(){$(this.parentNode).next().val($(this).val()),this.parentNode.style.backgroundColor=this.value}))}function Ee(e){var t=e.split(/\s/g).length/200;return Math.ceil(t)}function Se(e){var t=window.location.href;selectedText=e,selectedText=encodeURIComponent(e),Ae("https://twitter.com/intent/tweet?text="+('"'+selectedText+'" - '+t+" via @readermode"),"Share",550,295)}function Le(e){Ae("https://google.com/search?q="+encodeURIComponent(e),"Search",900,540)}function Ue(e,t){Ae("https://translate.google.com/#auto/"+$(e).find("#options-translate-to select").find(":selected").val()+"/"+t,"Translate",900,540)}function Ae(e,t,o,n){let i=screen.width/2-o/2,r=screen.height/2-n/2;return window.open(e,t,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+o+", height="+n+", top="+r+", left="+i)}function U(e,t){chrome.storage.sync.set({[e]:t})}function Ie(e,t,o){l=t,o&&chrome.storage.sync.set({cr_font_family:t}),$(e).find("#cr-content-container").css("font-family",t),$(e).find(`#options-font-family select option[value='${t}']`).prop("selected",!0)}function Oe(e,t,o){d=t,o&&chrome.storage.sync.set({cr_font_size:t}),$(e).find("#cr-content-container").css("font-size",t),$(e).find("#options-font-size input").val(t),$(e).find("#options-font-size .val").text(t)}function Be(e,t,o){f=t,o&&chrome.storage.sync.set({cr_line_height:t}),$(e).find("#cr-content-container").css("line-height",t),$(e).find("#options-line-height input").val(t),$(e).find("#options-line-height .val").text(t)}function Me(e,t,o){p=t,o&&chrome.storage.sync.set({cr_letter_space:t}),$(e).find("#cr-content-container").css("letter-spacing",t),$(e).find("#options-letter-space input").val(t),$(e).find("#options-letter-space .val").text(t)}function Ne(e,t,o){u=t,o&&chrome.storage.sync.set({cr_max_width:t}),u=t,$(e).find("#cr-container").css("max-width",t),$(e).find("#options-max-width .val").attr("value",t),$(e).find("#options-max-width .val").text(t)}function A(e,t,o,n){"light-theme"==o?(h=v,console.log("set background color to ",v),chrome.storage.sync.set({cr_background_color_light:v}),n&&chrome.storage.sync.set({cr_background_color_light:v})):"dark-theme"==o?(m=y,console.log("set background color to ",t),n&&chrome.storage.sync.set({cr_background_color_dark:y})):"custom-theme"==o&&(j=t,ae("set background color to ",t),n&&(chrome.storage.sync.set({cr_background_color:t}),console.log("stored custom color ",t))),$(e).find("#cr-body").css("background-color",t),$(e).find("#options-theme ul li a[data-theme='"+o+"']").css("background-color",t),$(e).find("#options-background-color input[name='background_color']").val(t),$(e).find("#options-background-color input[type='color']").val(t),$(e).find("#options-background-color label.color").css("background-color",t)}function I(e,t,o,n){"light-theme"==o?(k=x,console.log("set foreground color to ",x),n&&chrome.storage.sync.set({cr_foreground_color_light:x})):"dark-theme"==o?(b=w,console.log("set foreground color to ",t),n&&chrome.storage.sync.set({cr_foreground_color_dark:w})):"custom-theme"==o&&(G=t,ae("set Foreground color to ",t),n&&(chrome.storage.sync.set({cr_foreground_color:t}),console.log("stored custom foreground",t))),$(e).find("#reader-foreground").css({"background-color":t,"box-shadow":"0 8px 16px rgba(0, 0, 0, 0.1)"}),$(e).find("#options-foreground-color input[name='foreground_color']").val(t),$(e).find("#options-foreground-color input[type='color']").val(t),$(e).find("#options-foreground-color label.color").css("background-color",t)}function O(e,t,o,n){"light-theme"==o?(_=t,n&&chrome.storage.sync.set({cr_text_color_light:t})):"dark-theme"==o?(F=t,n&&chrome.storage.sync.set({cr_text_color_dark:t})):"custom-theme"==o&&(J=t,n&&chrome.storage.sync.set({cr_text_color:t})),$(e).find("#cr-body").css("color",t),$(e).find("#options-text-color input[name='text_color']").val(t),$(e).find("#options-text-color input[type='color']").val(t),$(e).find("#options-text-color label.color").css("background-color",t)}function B(e,t,o,n){"light-theme"==o?(g=t,n&&chrome.storage.sync.set({cr_link_color_light:t})):"dark-theme"==o?(C=t,n&&chrome.storage.sync.set({cr_link_color_dark:t})):"custom-theme"==o&&(K=t,n&&chrome.storage.sync.set({cr_link_color:t})),$(e).find("#cr-body").find("a").css("color",t),$(e).find("#options-link-color input[name='link_color']").val(t),$(e).find("#options-link-color input[type='color']").val(t),$(e).find("#options-link-color label.color").css("background-color",t)}function De(e,t,o){r=t,o&&chrome.storage.sync.set({cr_theme:t}),$(e).find("#options-theme ul li a").each((function(){$(this).attr("data-theme")==t?$(this).addClass("active"):$(this).removeClass("active")})),$(e).find("#cr-body").attr("class",t),"light-theme"==t?(te(!1,e),A(e,h,"light-theme"),I(e,k,"light-theme"),O(e,_,"light-theme"),B(e,g,"light-theme")):"dark-theme"==t?(te(!1,e),A(e,m,"dark-theme"),I(e,b,"dark-theme"),O(e,F,"dark-theme"),B(e,C,"dark-theme")):"custom-theme"==t&&(te(!0,e),A(e,j,"custom-theme"),I(e,G,"custom-theme"),O(e,J,"custom-theme"),B(e,K,"custom-theme"))}function He(e,t,o){"on"==t?($(e).find("#cr-outline").show(),$(e).find("#options-display-outline input").prop("checked",!0)):($(e).find("#cr-outline").hide(),$(e).find("#options-display-outline input").prop("checked",!1)),R=t,o&&chrome.storage.sync.set({cr_display_outline:t})}function We(e,t,o){"on"==t?($(e).find("#cr-content-container img").show(),$(e).find("#options-display-images input").prop("checked",!0)):($(e).find("#cr-content-container img").hide(),$(e).find("#options-display-images input").prop("checked",!1)),o&&(Y=t,chrome.storage.sync.set({cr_display_images:t}))}function qe(e,t,o){"on"==t?($(e).find("#cr-container #cr-meta").show(),$(e).find("#options-display-meta input").prop("checked",!0)):($(e).find("#cr-container #cr-meta").hide(),$(e).find("#options-display-meta input").prop("checked",!1)),o&&(T=t,chrome.storage.sync.set({cr_display_meta:t}))}function Pe(e,t,o){"on"==t?($(e).find("#cr-container #cr-meta-author").show(),$(e).find("#options-display-author input").prop("checked",!0)):($(e).find("#cr-container #cr-meta-author").hide(),$(e).find("#options-display-author input").prop("checked",!1)),o&&(Z=t,chrome.storage.sync.set({cr_display_author:t}))}function Xe(e,t,o){"on"==t?($(e).find("#cr-container #cr-meta-reading-time").show(),$(e).find("#options-display-reading-time input").prop("checked",!0)):($(e).find("#cr-container #cr-meta-reading-time").hide(),$(e).find("#options-display-reading-time input").prop("checked",!1)),o&&(ee=t,chrome.storage.sync.set({cr_display_reading_time:t}))}function je(e,t,o){"on"==t?($(e).find("#cr-container .options-panel").addClass("options-panel-dark"),$(e).find("#options-dark-panel input").prop("checked",!0)):($(e).find("#cr-container .options-panel").attr("class","options-panel"),$(e).find("#options-dark-panel input").prop("checked",!1)),o&&(Q=t,chrome.storage.sync.set({cr_dark_panel:t}))}function Ge(e,t,o){"on"==t?($(e).find("#reader-foreground").css("box-shadow","0 8px 16px rgba(0, 0, 0, 0.1)"),$(e).find("#options-display-foreground input").prop("checked",!0),console.log("turned on dynamic island"),z=t):($(e).find("#reader-foreground").css({"box-shadow":"0 0px 0px rgba(0, 0, 0, 0)"}),$(e).find("#options-display-foreground input").prop("checked",!1),console.log("turned off dynamic island"),z=t),z=t,o&&(z=t,chrome.storage.sync.set({cr_foreground:t}))}function Je(e,t,o){"on"==t?($(e).find("#cr-container #cr-footer").hide(),$(e).find("#options-display-footer input").prop("checked",!0)):($(e).find("#cr-container #cr-footer").show(),$(e).find("#options-display-footer input").prop("checked",!1)),o&&(T=t,chrome.storage.sync.set({cr_display_meta:t}))}function Ke(e,t,o){o&&(D=t,chrome.storage.sync.set({cr_default_css:t})),$(e).find("#options-default-css textarea").html(t),0==$(e).find("#cr_default_css").length&&$("<style id='cr_default_css'>").text(t).appendTo(e.head),$(e).find("#cr_default_css").html(t)}function Qe(e){chrome.storage.sync.get(["cr_font_family"],(function(t){Ie(e,t.cr_font_family?t.cr_font_family:"Arial",!0)})),chrome.storage.sync.get(["cr_font_size"],(function(t){Oe(e,t.cr_font_size?t.cr_font_size:16,!0)})),chrome.storage.sync.get(["cr_line_height"],(function(t){Be(e,t.cr_line_height?t.cr_line_height:1.84,!0)})),chrome.storage.sync.get(["cr_letter_space"],(function(t){Me(e,t.cr_letter_space?t.cr_letter_space:0,!0)})),chrome.storage.sync.get(["cr_max_width"],(function(t){Ne(e,t.cr_max_width?t.cr_max_width:680,!0)})),chrome.storage.sync.get(["cr_default_css"],(function(t){t.cr_default_css?Ke(e,t.cr_default_css,!0):fetch(chrome.runtime.getURL("styles/default.css")).then((e=>e.text())).then((t=>{Ke(e,t,!0),D=t}))})),chrome.storage.sync.get(["cr_background_color_light"],(function(t){A(e,t.cr_background_color_light?t.cr_background_color_light:v,"light-theme",!0)})),chrome.storage.sync.get(["cr_foreground_color_light"],(function(t){I(e,t.cr_foreground_color_light?t.cr_foreground_color_light:x,"light-theme",!0)})),chrome.storage.sync.get(["cr_text_color_light"],(function(t){O(e,t.cr_text_color_light?t.cr_text_color_light:H,"light-theme",!0)})),chrome.storage.sync.get(["cr_link_color_light"],(function(t){B(e,t.cr_link_color_light?t.cr_link_color_light:W,"light-theme",!0)})),chrome.storage.sync.get(["cr_background_color_dark"],(function(t){A(e,t.cr_background_color_dark?t.cr_background_color_dark:y,"dark-theme",!0)})),chrome.storage.sync.get(["cr_foreground_color_dark"],(function(t){I(e,t.cr_foreground_color_dark?t.cr_foreground_color_dark:w,"dark-theme",!0)})),chrome.storage.sync.get(["cr_text_color_dark"],(function(t){O(e,t.cr_text_color_dark?t.cr_text_color_dark:q,"dark-theme",!0)})),chrome.storage.sync.get(["cr_link_color_dark"],(function(t){B(e,t.cr_link_color_dark?t.cr_link_color_dark:P,"dark-theme",!0)})),chrome.storage.sync.get(["cr_background_color"],(function(t){A(e,t.cr_background_color?t.cr_background_color:"#F8F1E3","custom-theme",!0)})),chrome.storage.sync.get(["cr_foreground_color"],(function(t){I(e,t.cr_foreground_color?t.cr_foreground_color:"#FFFFFF","custom-theme",!0)})),chrome.storage.sync.get(["cr_text_color"],(function(t){O(e,t.cr_text_color?t.cr_text_color:"#333333","custom-theme",!0)})),chrome.storage.sync.get(["cr_link_color"],(function(t){B(e,t.cr_link_color?t.cr_link_color:"#5F6368","custom-theme",!0)})),chrome.storage.sync.get(["cr_theme"],(function(t){De(e,t.cr_theme?t.cr_theme:"custom-theme",!0)})),chrome.storage.sync.get(["cr_dark_panel"],(function(t){je(e,t.cr_dark_panel?t.cr_dark_panel:"on",!0)})),chrome.storage.sync.get(["cr_foreground"],(function(t){Ge(e,t.cr_foreground?t.cr_foreground:"on",!0)})),chrome.storage.sync.get(["cr_display_footer"],(function(t){Je(e,t.cr_display_footer?t.cr_display_footer:"off",!0)})),chrome.storage.sync.get(["cr_display_outline"],(function(t){He(e,t.cr_display_outline?t.cr_display_outline:"off",!0)})),chrome.storage.sync.get(["cr_display_images"],(function(t){We(e,t.cr_display_images?t.cr_display_images:"on",!0)})),chrome.storage.sync.get(["cr_display_meta"],(function(t){qe(e,t.cr_display_meta?t.cr_display_meta:"on",!0)})),chrome.storage.sync.get(["cr_display_author"],(function(t){Pe(e,t.cr_display_author?t.cr_display_author:"on",!0)})),chrome.storage.sync.get(["cr_display_reading_time"],(function(t){Xe(e,t.cr_display_reading_time?t.cr_display_reading_time:"on",!0)}))}function Ve(e){var t=e.contentWindow.document;$(t).find("#options-menu li a").click((function(){$(t).find("#options-menu li a").attr("class","tooltip"),this_menu=$(this),$(t).find(".options-panel").each((function(e,t){$(this_menu).attr("data-panel")==$(t).attr("id")?$(t).is(":visible")?$(t).hide():($(this_menu).addClass("active"),$(t).show()):$(t).hide()}))})),$(t).find("#options-delete-element").click((function(){$(this).hide(),$(t).find("#options-delete-element-stop").show(),ve(t)})),$(t).find("#options-delete-element-undo").click((function(){ke(t)})),$(t).find("#options-fullscreen").click((function(){fullscreen.toggle($("#container")[0]).then((function(){fullscreen.isFullscreen?($(t).find("#options-fullscreen i.enter").hide(),$(t).find("#options-fullscreen i.exit").show()):($(t).find("#options-fullscreen i.enter").show(),$(t).find("#options-fullscreen i.exit").hide())}))})),$(t).find("#options-print").click((function(){e.contentWindow.print()})),$(t).find("#options-saved-panel a.close").click((function(){$(t).find("#options-menu li a").attr("class","tooltip"),$(t).find("#options-saved-panel").hide()})),$(t).find("#options-close").click((function(){ct()}))}function Ye(e){$(e).click((function(t){target=$(t.target),setTimeout((function(){$(e).find(".options-panel").each((function(){id="#"+$(this).attr("id"),$(e).find(id).is(":visible")&&"#options-saved-panel"!=id&&(target.parents(id).length||target.parents("#options-menu").length||($(e).find(id).hide(),$(e).find("#options-menu li a").removeClass("active")))}))}),100)}))}function Ze(e){$(e).find("#options-font-family select").change((function(){Ie(e,$(this).val())})),$(e).find("#options-font-size input").on("input change",(function(){Oe(e,$(this).val())})),$(e).find("#options-line-height input").on("input change",(function(){Be(e,$(this).val())})),$(e).find("#options-letter-space input").on("input change",(function(){Me(e,$(this).val())})),$(e).find("#options-max-width input").on("input change",(function(){Ne(e,$(this).val())})),$(e).find(".options-panel-content button[name='save-options-style']").click((function(t){l=$(e).find("#options-font-family select").find(":selected").val(),d=$(e).find("#options-font-size input").val().trim(),f=$(e).find("#options-line-height input").val().trim(),p=$(e).find("#options-letter-space input").val().trim(),u=$(e).find("#options-max-width input").val().trim(),U("cr_font_family",l),U("cr_font_size",d),U("cr_line_height",f),U("cr_letter_space",p),U("cr_max_width",u),$("<span class='text-info'>Saved!</span>").insertAfter($(t.target)).fadeOut(1500,(function(){$(this).remove()}))}))}function M(e){return r=$(e).find("#options-theme ul li a.active").attr("data-theme")}function et(e){$(e).find("#options-theme ul li a").click((function(){r=$(this).attr("data-theme"),De(e,r)})),$(e).find("#options-background-color input").on("input change",(function(){A(e,$(this).val(),M(e))})),$(e).find("#options-foreground-color input").on("input change",(function(){I(e,$(this).val(),M(e))})),$(e).find("#options-text-color input").on("input change",(function(){O(e,$(this).val(),M(e))})),$(e).find("#options-link-color input").on("input change",(function(){B(e,$(this).val(),M(e))})),$(e).find(".options-panel-content button[name='save-options-themes']").click((function(t){r=M(e),cr_background_color_active=$(e).find("#options-background-color input[name='background_color']").val().trim(),cr_foreground_color_active=$(e).find("#options-foreground-color input[name='foreground_color']").val().trim(),cr_text_color_active=$(e).find("#options-text-color input[name='text_color']").val().trim(),cr_link_color_active=$(e).find("#options-link-color input[name='link_color']").val().trim(),U("cr_theme",r),"light-theme"==r?(h=cr_background_color_active,k=cr_foreground_color_active,_=cr_text_color_active,g=cr_link_color_active,U("cr_background_color_light",cr_background_color_active),U("cr_foreground_color_light",cr_foreground_color_active),U("cr_text_color_light",cr_text_color_active),U("cr_link_color_light",cr_link_color_active)):"dark-theme"==r?(m=cr_background_color_active,b=cr_foreground_color_active,F=cr_text_color_active,C=cr_link_color_active,U("cr_background_color_dark",cr_background_color_active),U("cr_foreground_color_dark",cr_foreground_color_active),U("cr_text_color_dark",cr_text_color_active),U("cr_link_color_dark",cr_link_color_active)):"custom-theme"==r&&(console.log("saving custom theme(1)"),cr_background_color_custom=cr_background_color_active,cr_foreground_color_custom=cr_foreground_color_active,console.log("saving: ",cr_background_color_custom," = ",cr_background_color_active),console.log("saving: ",cr_foreground_color_custom," = ",cr_foreground_color_active),cr_text_color_custom=cr_text_color_active,cr_link_color_custom=cr_link_color_active,U("cr_background_color",cr_background_color_active),U("cr_foreground_color",cr_foreground_color_active),U("cr_text_color",cr_text_color_active),U("cr_link_color",cr_link_color_active)),De(e,r),console.log("saved theme"),$("<span class='text-info'>Saved!</span>").insertAfter($(t.target)).fadeOut(1500,(function(){$(this).remove()}))}))}function tt(e){$(e).find("#options-dark-panel input").change((function(){je(e,o($(this)))})),$(e).find("#options-display-foreground input").change((function(){Ge(e,o($(this)))})),$(e).find("#options-display-footer input").change((function(){Je(e,o($(this)))})),$(e).find("#options-display-outline input").change((function(){He(e,o($(this)))})),$(e).find("#options-display-images input").change((function(){We(e,o($(this)))})),$(e).find("#options-display-meta input").change((function(){qe(e,o($(this)))})),$(e).find("#options-display-author input").change((function(){Pe(e,o($(this)))})),$(e).find("#options-display-reading-time input").change((function(){Xe(e,o($(this)))})),$(e).find(".options-panel-content button[name='save-options-reader-components']").click((function(t){cr_auto_dark_panel=o($(e).find("#options-dark-panel input")),z=o($(e).find("#options-display-foreground input")),V=o($(e).find("#options-display-footer input")),cr_scroll_speed=$(e).find("#options-scroll-speed input").val(),R=o($(e).find("#options-display-outline input")),Y=o($(e).find("#options-display-images input")),T=o($(e).find("#options-display-meta input")),Z=o($(e).find("#options-display-author input")),ee=o($(e).find("#options-display-reading-time input")),cr_display_saved_info=o($(e).find("#options-display-saved-info input")),U("cr_dark_panel",cr_auto_dark_panel),U("cr_foreground",z),U("cr_display_footer",V),U("cr_display_outline",R),U("cr_display_images",Y),U("cr_display_meta",T),U("cr_display_author",Z),U("cr_display_reading_time",ee),console.log("saved changes"),$("<span class='text-info'>Saved!</span>").insertAfter($(t.target)).fadeOut(1500,(function(){$(this).remove()}))}))}function ot(){var t=document.getElementById("cr-iframe"),o=t.contentWindow.document,n=de();if(i=n.title,e=n.excerpt,c=n.content,a=window.location.href,""==n.byline||"About 0 Minutes"==n.byline)var r="Unknown author";else r=n.byline;s=Ee(i+" "+c)+" min read",c=c.replace("Media playback is unsupported on your device",""),fetch(chrome.runtime.getURL("/content.html")).then((e=>e.text())).then((e=>{o.open(),o.write(e),o.close(),se(o),ue(o,n),$(o).find("#cr-title").html(i),$(o).find("#cr-content").html(c),he(o),$(o).find("#cr-content a").attr("target","_blank"),a&&$(o).find("#cr-meta").append("<li id='cr-meta-url'><i class='fas fa-link'></i><span class='truncated'><a href='"+a+"' target='_blank'>"+a+"</a></span><li>"),r&&$(o).find("#cr-meta").append("<li id='cr-meta-author'><i class='fas fa-pen-fancy'></i><span class='cr-author truncated'>"+r+"</span><li>"),s&&$(o).find("#cr-meta").append("<li id='cr-meta-reading-time'><i class='far fa-clock'></i><span>"+s+"</span><li>"),fe(o),_e(o),we(o),Ce(o),ze(o),Qe(o),Ve(t),Ye(o),$e(o),Re(o),Te(o),Ze(o),et(o),tt(o),$(o).find("body").css("margin",0),$(t).show(),setTimeout((function(){$(o).find("#cr-pre-loader").fadeOut(),$(o).find("#cr-body").show()}),500)})).catch((e=>{alert("Something went wrong... "+e)}))}function rt(){if(null==document.getElementById("cr-iframe")){var e=it();document.body.appendChild(e),nt=window.location.href,ot(),console.log("created iframe - ",e)}else ct(e)}function it(){document.body.style.overflow="hidden";var e=document.createElement("iframe");return e.id="cr-iframe",e.style.height="100%",e.style.width="100%",e.style.position="fixed",e.style.top="0px",e.style.right="0px",e.style.zIndex="9000000000000000000",e.frameBorder="none",e.style.backgroundColor="#fff",preloader=ce(),$(e).contents().find("body").html(preloader),console.log(e),e}function ct(){console.log("removing iframe - "),$("#cr-iframe").remove(),iframe=null,console.log("removed iframe - "),document.body.style.overflow="auto"}rt();